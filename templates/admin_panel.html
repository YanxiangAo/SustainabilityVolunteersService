<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Sustainable Volunteer Platform</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/components.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/layout.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/pages.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dark-theme.css') }}">
</head>

<body class="bg-subtle">
    <!-- Sidebar: static admin navigation + role title -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="flex items-center gap-2 mb-2">
                <div class="icon-container icon-container-lg icon-container-purple">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" style="color: var(--accent-purple);">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                    </svg>
                </div>
                <div>
                    <div>Administrator</div>
                    <div class="text-sm text-gray-500">System Admin</div>
                </div>
            </div>
        </div>

        <!-- Sidebar navigation tabs (wired up by static/js/admin.js) -->
        <nav class="sidebar-nav">
            <button class="nav-item active" data-tab="project-review">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                    <polyline points="14 2 14 8 20 8" />
                    <polyline points="9 15 11 17 15 13" />
                </svg>
                <span>Project Review</span>
            </button>
            <button class="nav-item" data-tab="hours-review">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10" />
                    <polyline points="12 6 12 12 16 14" />
                </svg>
                <span>Hours Review</span>
            </button>
            <button class="nav-item" data-tab="user-management">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" />
                    <circle cx="9" cy="7" r="4" />
                    <path d="M22 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75" />
                </svg>
                <span>User Management</span>
            </button>
            <button class="nav-item" data-tab="logs">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                    <polyline points="14 2 14 8 20 8" />
                    <line x1="16" y1="13" x2="8" y2="13" />
                    <line x1="16" y1="17" x2="8" y2="17" />
                </svg>
                <span>System Logs</span>
            </button>
        </nav>

        <div class="sidebar-bottom">
            <a href="/logout" class="nav-item">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                    <polyline points="16 17 21 12 16 7" />
                    <line x1="21" y1="12" x2="9" y2="12" />
                </svg>
                <span>Logout</span>
            </a>
        </div>
    </aside>

    <!-- Main Content: each tab-content below corresponds to one admin module -->
    <main class="main-content">
        <!-- Project Review Tab: review and moderate organization-submitted projects -->
        <div class="tab-content active" id="project-review-tab">
            <div class="mb-8">
                <h2>Project Review</h2>
                <p class="text-gray-600">Review volunteer projects submitted by organizations</p>
            </div>

            <div class="card mb-6">
                <div class="card-header">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 style="margin: 0;">Rural Teaching Support Activity</h3>
                            <div class="flex items-center gap-2 mt-2">
                                <span class="badge badge-orange">Pending Review</span>
                                <span class="text-sm text-gray-600">Hope Light Education Foundation Â· Submitted
                                    2025-11-02</span>
                            </div>
                        </div>
                        <div class="sustainability-rating rating-high">
                            <div class="stars">
                                <svg class="star filled" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    fill="currentColor" stroke="currentColor" stroke-width="2">
                                    <polygon
                                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
                                </svg>
                                <svg class="star filled" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    fill="currentColor" stroke="currentColor" stroke-width="2">
                                    <polygon
                                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
                                </svg>
                                <svg class="star filled" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    fill="currentColor" stroke="currentColor" stroke-width="2">
                                    <polygon
                                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
                                </svg>
                                <svg class="star filled" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                    fill="currentColor" stroke="currentColor" stroke-width="2">
                                    <polygon
                                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
                                </svg>
                                <svg class="star" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                    stroke="currentColor" stroke-width="2">
                                    <polygon
                                        points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <div class="grid grid-cols-3 gap-4 mb-4 text-sm">
                        <div>
                            <span class="text-gray-600">Activity Date: </span>
                            <span>2025-11-28</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Expected Participants: </span>
                            <span>20 people</span>
                        </div>
                        <div>
                            <span class="text-gray-600">Sustainability Rating: </span>
                            <span>4.2/5.0</span>
                        </div>
                    </div>

                    <div
                        style="background-color: var(--gray-50); padding: 1rem; border-radius: var(--border-radius); margin-bottom: 1rem;">
                        <p class="text-sm text-gray-700 mb-2">Project Description:</p>
                        <p class="text-sm text-gray-600">
                            This project aims to provide quality educational resources to rural children through
                            teaching support activities, helping them broaden their horizons and cultivate learning
                            interests. The activity will last one week, with volunteers teaching Chinese, Math, English
                            and organizing extracurricular activities.
                        </p>
                    </div>

                    <!-- Admin rating control -->
                    <div class="flex items-center gap-3 mb-4">
                        <label for="project-rating-input" class="text-sm text-gray-700" style="min-width: 7rem;">Set Rating:</label>
                        <input type="number" id="project-rating-input" name="rating" min="0" max="5" step="0.1"
                            placeholder="0.0 - 5.0"
                            style="width: 7rem; padding: 0.5rem; border: 1px solid var(--gray-300); border-radius: var(--border-radius);">
                        <button class="btn btn-outline" id="save-project-rating-btn">
                            Save Rating
                        </button>
                    </div>

                    <div class="flex gap-3">
                        <button class="btn btn-primary">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem;">
                                <polyline points="20 6 9 17 4 12" />
                            </svg>
                            Approve
                        </button>
                        <button class="btn" style="background-color: #ef4444; color: white;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem;">
                                <line x1="18" y1="6" x2="6" y2="18" />
                                <line x1="6" y1="6" x2="18" y2="18" />
                            </svg>
                            Reject
                        </button>
                        <button class="btn btn-outline">View Details</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Hours Review Tab: review and certify volunteer hour records -->
        <div class="tab-content" id="hours-review-tab">
            <div class="mb-8 flex items-center justify-between">
                <div>
                    <h2>Hours Review</h2>
                    <p class="text-gray-600">Review and certify volunteer service hours</p>
                </div>
                <button class="btn btn-primary" id="batch-approve-btn" onclick="batchApproveRecords()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" style="margin-right: 0.5rem;">
                        <polyline points="20 6 9 17 4 12" />
                    </svg>
                    Batch Approve (0)
                </button>
            </div>

            <div class="card">
                <div class="card-content">
                    <table>
                        <thead>
                            <tr>
                                <th style="width: 3rem;">
                                    <input id="select-all-records" type="checkbox" style="width: 1rem; height: 1rem;">
                                </th>
                                <th>Participant</th>
                                <th>Project Name</th>
                                <th>Organization</th>
                                <th>Hours</th>
                                <th>Points</th>
                                <th>Completion Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="checkbox" style="width: 1rem; height: 1rem;"></td>
                                <td>John Smith</td>
                                <td>Community Waste Sorting Campaign</td>
                                <td class="text-sm text-gray-600">Green Earth Environmental</td>
                                <td><span class="badge badge-secondary">4h</span></td>
                                <td><span class="badge badge-blue">80 pts</span></td>
                                <td class="text-sm text-gray-600">2025-10-30</td>
                                <td>
                                    <div class="flex gap-2">
                                        <button class="btn btn-outline btn-sm" style="color: var(--primary-green);">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                style="margin-right: 0.25rem;">
                                                <polyline points="20 6 9 17 4 12" />
                                            </svg>
                                            Approve
                                        </button>
                                        <button class="btn btn-outline btn-sm" style="color: #ef4444;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                style="margin-right: 0.25rem;">
                                                <line x1="18" y1="6" x2="6" y2="18" />
                                                <line x1="6" y1="6" x2="18" y2="18" />
                                            </svg>
                                            Reject
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" style="width: 1rem; height: 1rem;"></td>
                                <td>Emma Wilson</td>
                                <td>Digital Skills Training for Seniors</td>
                                <td class="text-sm text-gray-600">Silver Age Mutual Aid</td>
                                <td><span class="badge badge-secondary">3h</span></td>
                                <td><span class="badge badge-blue">60 pts</span></td>
                                <td class="text-sm text-gray-600">2025-10-28</td>
                                <td>
                                    <div class="flex gap-2">
                                        <button class="btn btn-outline btn-sm" style="color: var(--primary-green);">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                style="margin-right: 0.25rem;">
                                                <polyline points="20 6 9 17 4 12" />
                                            </svg>
                                            Approve
                                        </button>
                                        <button class="btn btn-outline btn-sm" style="color: #ef4444;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                style="margin-right: 0.25rem;">
                                                <line x1="18" y1="6" x2="6" y2="18" />
                                                <line x1="6" y1="6" x2="18" y2="18" />
                                            </svg>
                                            Reject
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- User Management Tab: manage participant / organization / admin accounts -->
        <div class="tab-content" id="user-management-tab">
            <div class="mb-8">
                <h2>User Management</h2>
                <p class="text-gray-600">Manage all platform users</p>
            </div>

            <div class="card">
                <div class="card-content">
                    <table>
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Type</th>
                                <th>Email</th>
                                <th>Status</th>
                                <th>Registration Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>John Smith</td>
                                <td><span class="badge badge-secondary">Participant</span></td>
                                <td class="text-sm text-gray-600">john@example.com</td>
                                <td><span class="badge badge-success">Active</span></td>
                                <td class="text-sm text-gray-600">2025-01-15</td>
                                <td>
                                    <div class="flex gap-2">
                                        <button class="btn btn-outline btn-sm" style="color: #ef4444;">Disable</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>Green Earth Environmental</td>
                                <td><span class="badge badge-secondary"
                                        style="background-color: #dbeafe; color: var(--secondary-blue);">Organization</span>
                                </td>
                                <td class="text-sm text-gray-600">green@example.com</td>
                                <td><span class="badge badge-success">Active</span></td>
                                <td class="text-sm text-gray-600">2024-12-01</td>
                                <td>
                                    <div class="flex gap-2">
                                        <button class="btn btn-outline btn-sm" style="color: #ef4444;">Disable</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Logs Tab -->
        <div class="tab-content" id="logs-tab">
            <div class="mb-8">
                <h2>System Logs</h2>
                <p class="text-gray-600">View application logs and system activity</p>
            </div>

            <div class="card mb-6">
                <div class="card-header">
                    <div class="flex items-center justify-between">
                        <h3 style="margin: 0;">Log Viewer</h3>
                        <div class="flex items-center gap-4">
                            <select id="log-level-filter"
                                style="padding: 0.5rem; border: 1px solid var(--gray-300); border-radius: var(--border-radius);">
                                <option value="">All Levels</option>
                                <option value="INFO">INFO</option>
                                <option value="WARNING">WARNING</option>
                                <option value="ERROR">ERROR</option>
                            </select>
                            <div class="flex items-center gap-2 text-sm text-gray-600">
                                <button class="btn btn-outline btn-sm" id="logs-prev-btn">Prev</button>
                                <span id="logs-page-info">Page 1</span>
                                <button class="btn btn-outline btn-sm" id="logs-next-btn">Next</button>
                            </div>
                            <button class="btn btn-outline" onclick="loadLogs()">Refresh</button>
                        </div>
                    </div>
                </div>
                <div class="card-content">
                    <pre id="logs-container"
                        style="background-color: var(--gray-50); padding: 1rem; border-radius: var(--border-radius); max-height: 500px; overflow: auto; font-family: monospace; font-size: 0.75rem; line-height: 1.5; white-space: pre-wrap;">Loading logs...</pre>
                </div>
            </div>
        </div>
    </main>

    <script src="{{ url_for('static', filename='js/theme.js') }}"></script>
    <script src="{{ url_for('static', filename='js/modal.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin.js') }}"></script>
</body>

</html>